---

---

<form id="form" method="POST" action="/api/contacto" class="mx-auto flex flex-col gap-5 font-montserrat font-medium text-negro">
            
            
            <div class="flex flex-col gap-1">
              <label for="nombre">
                 Nombre completo
              </label>
              <input type="text"
              id="nombre"
              name="nombre"
              placeholder="Ingresa tu nombre"
              required
              class="w-full px-4 py-3 border border-negroClaro rounded-xl focus:outline-none focus:ring-2 focus:ring-acento">
            </div>

            <div class="flex flex-col gap-1">
              <label for="correo">
                 Correo electrónico
              </label>
              <input type="email"
              id="correo"
              name="email"
              placeholder="correo@ejemplo.com"
              required
              class="w-full px-4 py-3 border border-negroClaro rounded-xl focus:outline-none focus:ring-2 focus:ring-acento">
            </div>

            <div class="flex flex-col gap-1">
              <label for="telefono">
                 Teléfono
              </label>
              <input type="tel"
              id="telefono"
              name="telefono"
              placeholder="+51 999 999 999"
              required
              class="w-full px-4 py-3 border border-negroClaro rounded-xl focus:outline-none focus:ring-2 focus:ring-acento">
            </div>


            <div class="flex flex-col gap-1">
              <label for="mensaje">
                 Mensaje
              </label>
              <textarea 
                id="mensaje"
                name="mensaje"
                rows="5"
                placeholder="Escribe tu mensaje aquí..."
                required
                class="w-full px-4 py-3 border border-negroClaro rounded-xl 
                      text-base leading-normal align-top resize-none
                      focus:outline-none focus:ring-2 focus:ring-acento">
              </textarea>

            </div>

              <button
              id="btnEnviar"
              type="submit"
              class="bg-primario text-negro font-bold py-4 rounded-2xl hover:bg-acento transition-colors duration-300 ease-out"
            >
              Enviar mensaje
            </button>

</form>


<script>
  const form = document.getElementById("form") as HTMLFormElement | null;
  const button = document.getElementById("btnEnviar") as HTMLButtonElement | null;

  if (!form || !button) {
    console.error("Formulario o botón no encontrados");
    throw new Error("Elementos requeridos no existen");
  }

  form.addEventListener("submit", async (e: SubmitEvent) =>{
    e.preventDefault();

    button.textContent = "Enviando mensaje...";
    button.disabled = true;

    try {
      const res = await fetch("/api/contacto", {
        method: "POST",
        body: new FormData(form),
      });

      const data = await res.json();

      if (data.success) {
        // Estado: éxito
        button.textContent = "Mensaje enviado";
        button.classList.remove("bg-primario");
        button.classList.add("bg-green-600", "text-white");

        form.reset();

        // Volver al estado inicial
        setTimeout(() => {
          button.textContent = "Enviar mensaje";
          button.disabled = false;
          button.classList.remove("bg-green-600");
          button.classList.add("bg-primario");
        }, 3000);

      } else {
        throw new Error("Error al enviar");
      }

    } catch (error) {
      // Estado: error
      button.textContent = "Error al enviar";
      button.classList.remove("bg-primario");
      button.classList.add("bg-red-600", "text-white");

      setTimeout(() => {
        button.textContent = "Enviar mensaje";
        button.disabled = false;
        button.classList.remove("bg-red-600");
        button.classList.add("bg-primario");
      }, 3000);
    }
  
  })
</script>